"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2013],{43330:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"utilities","title":"Utilities","description":"e2en includes utility functions for common operations. Access them via e2en.Util or directly on e2en.","source":"@site/docs/utilities.md","sourceDirName":".","slug":"/utilities","permalink":"/e2en/docs/utilities","draft":false,"unlisted":false,"editUrl":"https://github.com/estrogenie/e2en/edit/master/docs/utilities.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"defaultSidebar","previous":{"title":"Components","permalink":"/e2en/docs/components"},"next":{"title":"Middleware","permalink":"/e2en/docs/middleware"}}');var i=a(74848),r=a(28453);const t={sidebar_position:8},s="Utilities",c={},d=[{value:"Iteration",id:"iteration",level:2},{value:"ForEach",id:"foreach",level:3},{value:"ForEachAsync",id:"foreachasync",level:3},{value:"Map",id:"map",level:3},{value:"Filter",id:"filter",level:3},{value:"Find",id:"find",level:3},{value:"Reduce",id:"reduce",level:3},{value:"Every",id:"every",level:3},{value:"Some",id:"some",level:3},{value:"Table Operations",id:"table-operations",level:2},{value:"Reverse",id:"reverse",level:3},{value:"Shuffle",id:"shuffle",level:3},{value:"Copy",id:"copy",level:3},{value:"Keys",id:"keys",level:3},{value:"Values",id:"values",level:3},{value:"Count",id:"count",level:3},{value:"Flat",id:"flat",level:3},{value:"Timing",id:"timing",level:2},{value:"Step",id:"step",level:3},{value:"StopStep",id:"stopstep",level:3},{value:"GetActiveSteps",id:"getactivesteps",level:3},{value:"Defer",id:"defer",level:3},{value:"Delay",id:"delay",level:3},{value:"WaitFor",id:"waitfor",level:3},{value:"Performance Tracking",id:"performance-tracking",level:2},{value:"Enable Tracking",id:"enable-tracking",level:3},{value:"Automatic Tracking",id:"automatic-tracking",level:3},{value:"Get Performance Data",id:"get-performance-data",level:3},{value:"Print Report",id:"print-report",level:3},{value:"Clear Data",id:"clear-data",level:3},{value:"Estimate Memory Usage",id:"estimate-memory-usage",level:3},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Filtering Active Players",id:"filtering-active-players",level:3},{value:"Calculating Total Score",id:"calculating-total-score",level:3},{value:"Finding Nearest Enemy",id:"finding-nearest-enemy",level:3},{value:"Spawning Items with Delay",id:"spawning-items-with-delay",level:3},{value:"Polling for Game State",id:"polling-for-game-state",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"utilities",children:"Utilities"})}),"\n",(0,i.jsxs)(n.p,{children:["e2en includes utility functions for common operations. Access them via ",(0,i.jsx)(n.code,{children:"e2en.Util"})," or directly on ",(0,i.jsx)(n.code,{children:"e2en"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Both work\ne2en.Util.ForEach(items, callback)\ne2en.ForEach(items, callback)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"iteration",children:"Iteration"}),"\n",(0,i.jsx)(n.h3,{id:"foreach",children:"ForEach"}),"\n",(0,i.jsx)(n.p,{children:"Synchronous iteration over a table."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.ForEach(players, function(player, index)\n    print(index, player.Name)\nend)\n\n-- With performance tracking\ne2en.ForEach(items, callback, "ProcessInventory")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"foreachasync",children:"ForEachAsync"}),"\n",(0,i.jsx)(n.p,{children:"Spawns each callback in a separate thread."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"e2en.ForEachAsync(players, function(player, index)\n    -- Each runs in parallel\n    loadPlayerData(player)\nend)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"map",children:"Map"}),"\n",(0,i.jsx)(n.p,{children:"Transform values into a new table."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local names = e2en.Map(players, function(player)\n    return player.Name\nend)\n-- { "Player1", "Player2", ... }\n\nlocal doubled = e2en.Map({ 1, 2, 3 }, function(n)\n    return n * 2\nend)\n-- { 2, 4, 6 }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"filter",children:"Filter"}),"\n",(0,i.jsx)(n.p,{children:"Select values matching a predicate. Returns an array."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local adults = e2en.Filter(users, function(user)\n    return user.age >= 18\nend)\n\nlocal positives = e2en.Filter({ -1, 2, -3, 4 }, function(n)\n    return n > 0\nend)\n-- { 2, 4 }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"find",children:"Find"}),"\n",(0,i.jsx)(n.p,{children:"Get the first value matching a predicate."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local admin = e2en.Find(players, function(player)\n    return player:GetAttribute("IsAdmin")\nend)\n\nif admin then\n    print("Found admin:", admin.Name)\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"reduce",children:"Reduce"}),"\n",(0,i.jsx)(n.p,{children:"Aggregate values into a single result."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local total = e2en.Reduce(prices, function(sum, price)\n    return sum + price\nend, 0)\n\nlocal concatenated = e2en.Reduce(words, function(result, word)\n    return result .. " " .. word\nend, "")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"every",children:"Every"}),"\n",(0,i.jsx)(n.p,{children:"Check if all values match a predicate."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local allReady = e2en.Every(players, function(player)\n    return player:GetAttribute("Ready")\nend)\n\nif allReady then\n    startGame()\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"some",children:"Some"}),"\n",(0,i.jsx)(n.p,{children:"Check if any value matches a predicate."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local hasEnemy = e2en.Some(entities, function(entity)\n    return entity.Type == "Enemy"\nend)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"table-operations",children:"Table Operations"}),"\n",(0,i.jsx)(n.h3,{id:"reverse",children:"Reverse"}),"\n",(0,i.jsx)(n.p,{children:"Reverse array order."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local reversed = e2en.Reverse({ 1, 2, 3 })\n-- { 3, 2, 1 }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"shuffle",children:"Shuffle"}),"\n",(0,i.jsx)(n.p,{children:"Randomize array order."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local shuffled = e2en.Shuffle({ 1, 2, 3, 4, 5 })\n-- Random order each time\n"})}),"\n",(0,i.jsx)(n.h3,{id:"copy",children:"Copy"}),"\n",(0,i.jsx)(n.p,{children:"Clone a table (shallow or deep)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local shallow = e2en.Copy(original)\nlocal deep = e2en.Copy(original, true)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"keys",children:"Keys"}),"\n",(0,i.jsx)(n.p,{children:"Get all keys from a table."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local keys = e2en.Keys({ a = 1, b = 2, c = 3 })\n-- { "a", "b", "c" }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"values",children:"Values"}),"\n",(0,i.jsx)(n.p,{children:"Get all values from a table."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local values = e2en.Values({ a = 1, b = 2, c = 3 })\n-- { 1, 2, 3 }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"count",children:"Count"}),"\n",(0,i.jsx)(n.p,{children:"Count entries in a table (works for dictionaries)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local count = e2en.Count({ a = 1, b = 2, c = 3 })\n-- 3\n"})}),"\n",(0,i.jsx)(n.h3,{id:"flat",children:"Flat"}),"\n",(0,i.jsx)(n.p,{children:"Flatten nested arrays."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local flat = e2en.Flat({ { 1, 2 }, { 3, { 4 } } })\n-- { 1, 2, 3, { 4 } }\n\nlocal deepFlat = e2en.Flat({ { 1, { 2, { 3 } } } }, 2)\n-- { 1, 2, { 3 } }\n"})}),"\n",(0,i.jsx)(n.h2,{id:"timing",children:"Timing"}),"\n",(0,i.jsx)(n.h3,{id:"step",children:"Step"}),"\n",(0,i.jsx)(n.p,{children:"Run a function every frame."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Heartbeat (server and client)\nlocal connection = e2en.Step("UpdatePositions", function(dt)\n    updateAllPositions(dt)\nend)\n\n-- RenderStepped (client only)\nlocal connection = e2en.Step("UpdateCamera", function(dt)\n    updateCamera(dt)\nend, true)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"stopstep",children:"StopStep"}),"\n",(0,i.jsx)(n.p,{children:"Stop a running step."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.StopStep("UpdatePositions")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"getactivesteps",children:"GetActiveSteps"}),"\n",(0,i.jsx)(n.p,{children:"Get names of all running steps."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local steps = e2en.GetActiveSteps()\n-- { "UpdatePositions", "UpdateCamera" }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"defer",children:"Defer"}),"\n",(0,i.jsx)(n.p,{children:"Run next frame."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.Defer(function()\n    print("Runs next frame")\nend)\n\n-- With arguments\ne2en.Defer(function(a, b)\n    print(a + b)\nend, 1, 2)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delay",children:"Delay"}),"\n",(0,i.jsx)(n.p,{children:"Run after a duration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.Delay(2, function()\n    print("2 seconds later")\nend)\n\n-- With arguments\ne2en.Delay(1, function(message)\n    print(message)\nend, "Hello!")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"waitfor",children:"WaitFor"}),"\n",(0,i.jsx)(n.p,{children:"Poll until a condition is met."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local target = e2en.WaitFor(function()\n    return workspace:FindFirstChild("Target")\nend, 10, 0.1)  -- timeout, interval\n\nif target then\n    print("Found target!")\nelse\n    print("Timed out")\nend\n'})}),"\n",(0,i.jsx)(n.h2,{id:"performance-tracking",children:"Performance Tracking"}),"\n",(0,i.jsx)(n.p,{children:"Track execution time of utility functions."}),"\n",(0,i.jsx)(n.h3,{id:"enable-tracking",children:"Enable Tracking"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"e2en.EnablePerformanceTracking(true)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"automatic-tracking",children:"Automatic Tracking"}),"\n",(0,i.jsx)(n.p,{children:"All iteration functions support a tracking name:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.ForEach(items, callback, "ProcessItems")\ne2en.Map(data, transform, "TransformData")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Steps are automatically tracked:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'e2en.Step("GameLoop", function(dt)\n    -- Tracked as "Step:GameLoop"\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"get-performance-data",children:"Get Performance Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local data = e2en.GetPerformanceData()\n\n--[[\n{\n    ["ProcessItems"] = {\n        calls = 100,\n        totalTime = 0.5,\n        avgTime = 0.005,\n        peakTime = 0.02,\n        lastCall = 12345.67,\n    },\n    ["Step:GameLoop"] = { ... },\n}\n]]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"print-report",children:"Print Report"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"e2en.PrintPerformanceReport()\n\n-- Output:\n-- === Performance Report ===\n-- [Step:GameLoop] calls: 1000 | total: 50.0000ms | avg: 0.0500ms | peak: 0.2000ms\n-- [ProcessItems] calls: 100 | total: 5.0000ms | avg: 0.0500ms | peak: 0.1000ms\n-- ==========================\n"})}),"\n",(0,i.jsx)(n.h3,{id:"clear-data",children:"Clear Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"e2en.ClearPerformanceData()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"estimate-memory-usage",children:"Estimate Memory Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local bytes = e2en.EstimateMemoryUsage(someTable)\nprint("Estimated size:", bytes, "bytes")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,i.jsx)(n.h3,{id:"filtering-active-players",children:"Filtering Active Players"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local activePlayers = e2en.Filter(Players:GetPlayers(), function(player)\n    return player.Character and player.Character:FindFirstChild("Humanoid")\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"calculating-total-score",children:"Calculating Total Score"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"local totalScore = e2en.Reduce(players, function(total, player)\n    return total + (playerScores[player] or 0)\nend, 0)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"finding-nearest-enemy",children:"Finding Nearest Enemy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local nearest = e2en.Reduce(enemies, function(closest, enemy)\n    local distance = (enemy.Position - myPosition).Magnitude\n    if not closest or distance < closest.distance then\n        return { enemy = enemy, distance = distance }\n    end\n    return closest\nend, nil)\n\nif nearest then\n    print("Nearest enemy:", nearest.enemy.Name)\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"spawning-items-with-delay",children:"Spawning Items with Delay"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"e2en.ForEach(spawnPoints, function(point, index)\n    e2en.Delay(index * 0.5, function()\n        spawnItemAt(point.Position)\n    end)\nend)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"polling-for-game-state",children:"Polling for Game State"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local gameStarted = e2en.WaitFor(function()\n    local GameService = e2en.GetService("GameService")\n    local phase = GameService.GamePhase:Get()\n    return phase == "Playing" and true or nil\nend, 60)\n\nif gameStarted then\n    print("Game started!")\nelse\n    print("Timed out waiting for game")\nend\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>s});var l=a(96540);const i={},r=l.createContext(i);function t(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);