"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1293],{35287:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"communication","title":"Communication","description":"e2en provides three ways for servers and clients to communicate: Remote Methods, Remote Signals, and Remote Properties. Each serves a different purpose.","source":"@site/docs/communication.md","sourceDirName":".","slug":"/communication","permalink":"/e2en/docs/communication","draft":false,"unlisted":false,"editUrl":"https://github.com/estrogenie/e2en/edit/master/docs/communication.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"defaultSidebar","previous":{"title":"Controllers","permalink":"/e2en/docs/controllers"},"next":{"title":"Lifecycle","permalink":"/e2en/docs/lifecycle"}}');var i=r(74848),t=r(28453);const a={sidebar_position:5},s="Communication",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Remote Methods",id:"remote-methods",level:2},{value:"Server Definition",id:"server-definition",level:3},{value:"Client Usage",id:"client-usage",level:3},{value:"Security",id:"security",level:3},{value:"Remote Signals",id:"remote-signals",level:2},{value:"Creating a Signal",id:"creating-a-signal",level:3},{value:"Server \u2192 Client",id:"server--client",level:3},{value:"Fire to One Player",id:"fire-to-one-player",level:4},{value:"Fire to All Players",id:"fire-to-all-players",level:4},{value:"Fire to Multiple Players",id:"fire-to-multiple-players",level:4},{value:"Fire to All Except One",id:"fire-to-all-except-one",level:4},{value:"Fire with Filter",id:"fire-with-filter",level:4},{value:"Client \u2192 Server",id:"client--server",level:3},{value:"Client Listening",id:"client-listening",level:3},{value:"Unreliable Signals",id:"unreliable-signals",level:3},{value:"Remote Properties",id:"remote-properties",level:2},{value:"Creating a Property",id:"creating-a-property",level:3},{value:"Server: Setting Values",id:"server-setting-values",level:3},{value:"Set for All Players",id:"set-for-all-players",level:4},{value:"Set Top Value Only",id:"set-top-value-only",level:4},{value:"Set for Specific Player",id:"set-for-specific-player",level:4},{value:"Set for Multiple Players",id:"set-for-multiple-players",level:4},{value:"Set with Filter",id:"set-with-filter",level:4},{value:"Server: Reading Values",id:"server-reading-values",level:3},{value:"Server: Clearing Overrides",id:"server-clearing-overrides",level:3},{value:"Server: Observing Changes",id:"server-observing-changes",level:3},{value:"Client: Reading Values",id:"client-reading-values",level:3},{value:"Client: Observing Changes",id:"client-observing-changes",level:3},{value:"Client: Waiting for Initial Value",id:"client-waiting-for-initial-value",level:3},{value:"Per-Player Properties",id:"per-player-properties",level:2},{value:"Choosing the Right Type",id:"choosing-the-right-type",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"communication",children:"Communication"})}),"\n",(0,i.jsxs)(n.p,{children:["e2en provides three ways for servers and clients to communicate: ",(0,i.jsx)(n.strong,{children:"Remote Methods"}),", ",(0,i.jsx)(n.strong,{children:"Remote Signals"}),", and ",(0,i.jsx)(n.strong,{children:"Remote Properties"}),". Each serves a different purpose."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Direction"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Remote Method"}),(0,i.jsx)(n.td,{children:"Client \u2192 Server"}),(0,i.jsx)(n.td,{children:"Request/response calls"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Remote Signal"}),(0,i.jsx)(n.td,{children:"Both"}),(0,i.jsx)(n.td,{children:"Fire-and-forget events"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Remote Property"}),(0,i.jsx)(n.td,{children:"Server \u2192 Client"}),(0,i.jsx)(n.td,{children:"Replicated state"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"remote-methods",children:"Remote Methods"}),"\n",(0,i.jsx)(n.p,{children:"Functions in a Service's Client table become callable from clients."}),"\n",(0,i.jsx)(n.h3,{id:"server-definition",children:"Server Definition"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local ShopService = e2en.CreateService({\n    Name = "ShopService",\n    Client = {\n        GetItems = function(self, player: Player): {any}\n            return getAvailableItems()\n        end,\n\n        Purchase = function(self, player: Player, itemId: string): (boolean, string?)\n            if typeof(itemId) ~= "string" then\n                return false, "Invalid item"\n            end\n\n            if not canAfford(player, itemId) then\n                return false, "Not enough coins"\n            end\n\n            giveItem(player, itemId)\n            return true, nil\n        end,\n    },\n})\n'})}),"\n",(0,i.jsx)(n.h3,{id:"client-usage",children:"Client Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local ShopService = e2en.GetService("ShopService")\n\n-- Call like a method (player is automatically passed)\nlocal items = ShopService:GetItems()\n\nlocal success, error = ShopService:Purchase("sword_01")\nif not success then\n    print("Failed:", error)\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,i.jsxs)(n.admonition,{title:"Always Validate",type:"danger",children:[(0,i.jsx)(n.p,{children:"Remote methods are called by clients. Never trust the arguments:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'Purchase = function(self, player: Player, itemId: any, quantity: any)\n    -- Validate types\n    if typeof(itemId) ~= "string" then return false end\n    if typeof(quantity) ~= "number" then return false end\n    if quantity < 1 or quantity > 99 then return false end\n    if math.floor(quantity) ~= quantity then return false end\n\n    -- Now safe to use\n    ...\nend\n'})})]}),"\n",(0,i.jsx)(n.h2,{id:"remote-signals",children:"Remote Signals"}),"\n",(0,i.jsx)(n.p,{children:"Signals are fire-and-forget events that can flow both directions."}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-signal",children:"Creating a Signal"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local CombatService = e2en.CreateService({\n    Name = "CombatService",\n    Client = {\n        DamageDealt = e2en.CreateSignal(),\n        PlayerKilled = e2en.CreateSignal(),\n    },\n})\n'})}),"\n",(0,i.jsx)(n.h3,{id:"server--client",children:"Server \u2192 Client"}),"\n",(0,i.jsx)(n.h4,{id:"fire-to-one-player",children:"Fire to One Player"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'self.Client.DamageDealt:Fire(player, { amount = 25, source = "Enemy" })\n'})}),"\n",(0,i.jsx)(n.h4,{id:"fire-to-all-players",children:"Fire to All Players"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'self.Client.PlayerKilled:FireAll({ victim = "Player1", killer = "Player2" })\n'})}),"\n",(0,i.jsx)(n.h4,{id:"fire-to-multiple-players",children:"Fire to Multiple Players"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local team = getTeamPlayers("Red")\nself.Client.DamageDealt:FireFor(team, { amount = 10 })\n'})}),"\n",(0,i.jsx)(n.h4,{id:"fire-to-all-except-one",children:"Fire to All Except One"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"self.Client.DamageDealt:FireExcept(excludedPlayer, data)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"fire-with-filter",children:"Fire with Filter"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"self.Client.DamageDealt:FireFilter(function(player)\n    return player.Team == Teams.Blue\nend, data)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"client--server",children:"Client \u2192 Server"}),"\n",(0,i.jsx)(n.p,{children:"Clients can fire signals back:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Client\nlocal CombatService = e2en.GetService("CombatService")\nCombatService.DamageDealt:Fire({ target = "Enemy1" })\n\n-- Server (listen for client fires)\nself.Client.DamageDealt:Connect(function(player, data)\n    -- Validate!\n    if typeof(data) ~= "table" then return end\n    if typeof(data.target) ~= "string" then return end\n\n    handlePlayerAttack(player, data.target)\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"client-listening",children:"Client Listening"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local CombatService = e2en.GetService("CombatService")\n\nCombatService.DamageDealt:Connect(function(data)\n    print("Took damage:", data.amount)\n    showDamageEffect(data.amount)\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"unreliable-signals",children:"Unreliable Signals"}),"\n",(0,i.jsx)(n.p,{children:"For high-frequency data where occasional packet loss is acceptable:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"Client = {\n    PositionUpdate = e2en.CreateUnreliableSignal(),\n}\n\n-- Uses UnreliableRemoteEvent under the hood\n-- Lower latency, but packets may be dropped\n"})}),"\n",(0,i.jsx)(n.h2,{id:"remote-properties",children:"Remote Properties"}),"\n",(0,i.jsx)(n.p,{children:"Properties replicate state from server to client with built-in observation."}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-property",children:"Creating a Property"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local GameService = e2en.CreateService({\n    Name = "GameService",\n    Client = {\n        GamePhase = e2en.CreateProperty("Waiting"),\n        RoundTime = e2en.CreateProperty(0),\n        Scores = e2en.CreateProperty({}),\n    },\n})\n'})}),"\n",(0,i.jsx)(n.h3,{id:"server-setting-values",children:"Server: Setting Values"}),"\n",(0,i.jsx)(n.h4,{id:"set-for-all-players",children:"Set for All Players"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Clears per-player overrides\nself.Client.GamePhase:Set("Playing")\n'})}),"\n",(0,i.jsx)(n.h4,{id:"set-top-value-only",children:"Set Top Value Only"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Sets the default without clearing per-player overrides\nself.Client.RoundTime:SetTop(60)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"set-for-specific-player",children:"Set for Specific Player"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"self.Client.Scores:SetFor(player, { kills = 5, deaths = 2 })\n"})}),"\n",(0,i.jsx)(n.h4,{id:"set-for-multiple-players",children:"Set for Multiple Players"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"self.Client.Scores:SetForList(teamPlayers, { kills = 0, deaths = 0 })\n"})}),"\n",(0,i.jsx)(n.h4,{id:"set-with-filter",children:"Set with Filter"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'self.Client.Scores:SetFilter(function(player)\n    return player:GetAttribute("VIP")\nend, specialScores)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"server-reading-values",children:"Server: Reading Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Get the top value\nlocal phase = self.Client.GamePhase:Get()\n\n-- Get value for specific player (respects per-player overrides)\nlocal playerScores = self.Client.Scores:GetFor(player)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"server-clearing-overrides",children:"Server: Clearing Overrides"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Player reverts to the top value\nself.Client.Scores:ClearFor(player)\nself.Client.Scores:ClearForList(players)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"server-observing-changes",children:"Server: Observing Changes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Called immediately with current value, then on each change\nself.Client.GamePhase:Observe(function(phase)\n    print("Phase changed to:", phase)\nend)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"client-reading-values",children:"Client: Reading Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local GameService = e2en.GetService("GameService")\n\n-- Get current value\nlocal phase = GameService.GamePhase:Get()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"client-observing-changes",children:"Client: Observing Changes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"-- Called immediately, then on each update\nGameService.GamePhase:Observe(function(phase)\n    updatePhaseUI(phase)\nend)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"client-waiting-for-initial-value",children:"Client: Waiting for Initial Value"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'-- Check if initial value received\nif GameService.Scores:IsReady() then\n    local scores = GameService.Scores:Get()\nend\n\n-- Wait for ready (with optional timeout)\nlocal scores = GameService.Scores:OnReady(5) -- 5 second timeout\nif scores then\n    print("Got scores:", scores)\nelse\n    print("Timed out waiting for scores")\nend\n'})}),"\n",(0,i.jsx)(n.h2,{id:"per-player-properties",children:"Per-Player Properties"}),"\n",(0,i.jsx)(n.p,{children:"Properties support per-player overrides\u2014perfect for player-specific state:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local DataService = e2en.CreateService({\n    Name = "DataService",\n    Client = {\n        Coins = e2en.CreateProperty(0),\n        Inventory = e2en.CreateProperty({}),\n    },\n})\n\nfunction DataService:Start()\n    e2en.OnPlayerAdded(function(player, trove)\n        -- Load player\'s data\n        local data = loadPlayerData(player)\n\n        -- Set their specific values\n        self.Client.Coins:SetFor(player, data.coins)\n        self.Client.Inventory:SetFor(player, data.inventory)\n    end)\nend\n'})}),"\n",(0,i.jsx)(n.p,{children:"On the client, each player sees only their own value:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local DataService = e2en.GetService("DataService")\n\nDataService.Coins:Observe(function(coins)\n    -- This is MY coins, not another player\'s\n    updateCoinsUI(coins)\nend)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"choosing-the-right-type",children:"Choosing the Right Type"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Use"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Client requests data"}),(0,i.jsx)(n.td,{children:"Remote Method"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Client performs action"}),(0,i.jsx)(n.td,{children:"Remote Method"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Server notifies one-time event"}),(0,i.jsx)(n.td,{children:"Remote Signal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"High-frequency updates (positions)"}),(0,i.jsx)(n.td,{children:"Unreliable Signal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Persistent replicated state"}),(0,i.jsx)(n.td,{children:"Remote Property"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Per-player state"}),(0,i.jsx)(n.td,{children:"Remote Property with SetFor"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var l=r(96540);const i={},t=l.createContext(i);function a(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);